State Diagram

@startuml
hide empty description

state state_machine_Charging_Station {
[*] --> Idle

Idle -right-> CarIdentification : CarPlugsIntoSocket

CarIdentification --> Charging : valid
CarIdentification -left-> Idle : failure
Charging --> Idle : CarBatteryFull

Idle -down-> CS_Battery_Charging: chargeBatteries
CS_Battery_Charging --> Idle: BatteriesFull

}
@enduml

-----------------------------------------

Class Diagram

@startuml
package "ClassDiagram" {
class User
User : String Name
User : String Email
User : String Password 
User : String BankAccount


class CarOwner
CarOwner : getCalender()
CarOwner : getLocation()

CarOwner -left-|> User
CarOwner "1" -- "1" Car : owns >
CarOwner -- eMSP : uses >


class Car
Car "1" --* "1" Battery


class eMSP



class CPO
CPO -left-|> User
CPO "1" -- "*" ChargingStation : owns >
CPO "1" â€“left-* "1" CPMS : uses >


class CPMS


class DSO
DSO : Int AvailableEnergy
DSO : Int Price


class ChargingStation
ChargingStation : String Location
ChargingStation : Int AmountFreeChargingSockets
ChargingStation : Int AvailableEnergyInBatteries
ChargingStation : Int AmountOfConnectedCars

ChargingStation "1" --* "*" Battery
ChargingStation "1" --* "1..*" ChargingSocket


class ChargingSocket
ChargingSocket : Int Price
ChargingSocket : Boolean isOccupied
ChargingSocket : Int TimeUntilFree
ChargingSocket : Int PowerAlreadyAbsorbed

ChargingSocket -- "1" ChargingTypes

enum ChargingTypes {
  SLOW,
  FAST,
  RAPID
}

class Battery
Battery : Int BatteryStatus
Battery : String BatteryType



eMSP "*" -- "*" CPMS
CPMS "*" -- "*" DSO

CPMS "1" -- "*" ChargingStation

eMSP -[hidden]down- Car
CPMS -[hidden]down- Car
left to right direction
}
@enduml

---------------------------------------------------------------
Use Case Diagram Registration/Login

@startuml
left to right direction
package "Use Case Diagram" {
package eMSP {
  usecase "Register" as R1
  usecase "Login" as L1
}
package CSMP {
  usecase "Register" as R2
  usecase "Login" as L2
}
actor CarOwner
actor CPO
actor User
CPO -left-|> User
CarOwner -right-|> User
CarOwner --> R1 : initiate 
CarOwner --> L1 : initiate
CPO  --> R2 : initiate 
CPO  --> L2 : initiate
}
@enduml

-----------------------------------------------------------------
Use Case Diagram Booking a charge 

@startuml
package "Use Case Diagram" {
left to right direction
actor CarOwner
database CPMS 
package eMSP {
  usecase "Information about nearby Charging Stations" as U1
  usecase "Book a Charging socket" as U2
  usecase "Pay for the charge" as U3
  usecase "Starting the charge" as U4
  together {
  usecase "Stopping the charge" as U5
  usecase "Notification about finished charging" as U6 
  }
}

U5 .> U6 : include

CarOwner -down-> U1 : initate
CarOwner -> U2 : initate
CarOwner -> U3 : initate
CarOwner -> U4 : requests
CPMS -up-> U4 : initate
CPMS -> U5 : initate
CarOwner -> U6 : initate
CPMS -up-> U1 : participate
}
@enduml

----------------------------------------------------------
Use Case Suggestion

@startuml
left to right direction
package "Use Case Diagram" {

actor CarOwner
database CPMS 
package eMSP {
  usecase "Information about nearby Charging Stations" as U1
  usecase "Check Car Owner Schedule" as U2
  usecase "Check Car Battery Status" as U3
  usecase "Suggest a charging offer" as U4
}

CarOwner -down-> U4 : isSuggested
CarOwner -down-> U2 : isChecked
CarOwner -down-> U3 : isChecked
CPMS -up-> U1 : participate
}

@enduml

--------------------------------------------------------
Use Case CPMS

@startuml
left to right direction
package "Use Case Diagram" {

actor CPO
actor DSO
entity ChargingStation
package CPMS {
  usecase "Internal/External Status Information of Charging Stations" as U1
  usecase "Check current energy prices" as U2
  usecase "Buy energy" as U3
  usecase "Use energy from batteries" as U4
  usecase "Start charging car" as U5
  usecase "Stop charging car" as U6
  usecase "Activate automatic mode" as U7
  usecase "Set special offer" as U8
  usecase "Change price" as U9
}

CPO-down-> U1 : initiate
CPO -down-> U2 : initiate
CPO -down-> U3 : initiate
CPO -down-> U4 : initiate
DSO -up-> U2 
DSO -up-> U3
ChargingStation -up-> U1
ChargingStation -up-> U4
ChargingStation -up-> U5 : isActivated
ChargingStation -up-> U6 : initiate
CPO -down-> U7 : initiate
CPO -down-> U8 : initiate
CPO -down-> U9 : initiate
}

@enduml

------------------------------------------------

ClientServer eMSP

@startuml
skinparam componentStyle uml1
left to right direction

actor CarOwner

component Client{
  component "GUI" {
  }
  component "ApplicationLogic"{ 
  }
}

component Server {
  component "Data" {
  }
  
}

Client <-down-> Server
CarOwner <-down-> Client
@enduml

---------------------------------------------
ClientServer CPMS

@startuml
skinparam componentStyle uml1
left to right direction
actor CPO
component Client{
  component "GUI" {
  }
  
}

component Server {
component "ApplicationLogic"{ 
  }  
component "Data" {
  }
  
}

Client <-down-> Server
CPO <-down-> Client
@enduml

-----------------------------------------

CPMS Component View 

@startuml
skinparam componentStyle uml1
left to right direction

() "ServerAPI" as SI

component Client{
  component "ClientApplication" {
  }
  
}

component Server {
() "DBMS_API"
component "ApplicationLogic"{ 
component "Router" as R
component "AuthenticationService"
component "Model"
component "ChangePriceService"
component "ActivateAutomaticModeService"
component "BuyEnergyService"
component "Internal/External_StatusInformationService"
component "UseEnergyFromBatteriesService"
component "ChargingService"

together {
component "PaymentAPIHandler"
component "ChargingStationAPIHandler"
component "DSOAPIHandler"
component "eMSP_APIHandler"
}

() "AuthenticationInterface"
() "ModelInterface"
()"CPInterface"
()"AAInterface"
()"BYInterface"
()"StatusInterface"
()"BatteriesInterface"
()"ChargingInterface"

  }  
component "DBMS" as DB {
  }
  
}

Client -down- SI
SI -down- R
R -- "AuthenticationInterface"

"AuthenticationInterface" -d- "AuthenticationService"
"AuthenticationService" -- "ModelInterface"
"ModelInterface" -- "Model"
"Model" -- "DBMS_API"
"DBMS_API" -- DB 

"ChangePriceService" -up- "CPInterface"
"ActivateAutomaticModeService" -up- "AAInterface"
"BuyEnergyService" -up- "BYInterface"
"Internal/External_StatusInformationService" -up- "StatusInterface"
"UseEnergyFromBatteriesService" -up- "BatteriesInterface"
"ChargingService" -up- "ChargingInterface"

R -down- "CPInterface"
R -down- "AAInterface"
R -down- "BYInterface"
R -down- "StatusInterface"
R -down- "BatteriesInterface"
R -down- "ChargingInterface"

"ChangePriceService" -- "ModelInterface"
"ActivateAutomaticModeService" -- "ModelInterface"
"BuyEnergyService" -- "ModelInterface"
"Internal/External_StatusInformationService" -- "ModelInterface"
"UseEnergyFromBatteriesService" -- "ModelInterface"
"ChargingService" -- "ModelInterface"


"BuyEnergyService" -- "DSOAPIHandler"
"BuyEnergyService" -- "PaymentAPIHandler"
"Internal/External_StatusInformationService" -- "ChargingStationAPIHandler"
"UseEnergyFromBatteriesService" -- "ChargingStationAPIHandler"
"ChargingService" -- "ChargingStationAPIHandler"
"ChargingService" -- "eMSP_APIHandler"

@enduml

---------------------------------------------
eMSP Component View

@startuml
skinparam componentStyle uml1
left to right direction


component Client{
  component "ClientApplication" {
  }
  


component "ApplicationLogic"{ 
component "Router" as R
component "AuthenticationService"
component "Model"

component "NearbyCharginggStationService"
component "PayChargeService"
component "BookChargeService"
component "ChargingService"
component "SuggestionService"
component "CarBatteryService"
component "PhoneDataService"

together {
component "PaymentAPIHandler"
component "CPMS_APIHandler"
component "CarBattery_APIHandler"
component "PhoneData_APIHandler"
}

() "AuthenticationInterface"
() "ModelInterface"
()"CS_Interface"
()"Pay_Interface"
()"Book_Interface"
()"ChargingInterface"
() "Sugg_Interface"
() "CarBattery_Interface"
() "PhoneData_Interface"

  }  
}


component Server {
component "DBMS" as DB {
  }
  
}

ClientApplication -down- R
R -down- "AuthenticationInterface"


"AuthenticationService" -up- "AuthenticationInterface"
"AuthenticationService" -- "ModelInterface"
"ModelInterface" -- "Model"
"Model" -- "DBMS_API"
"DBMS_API" -- DB 

"NearbyCharginggStationService"-up-"CS_Interface"
"PayChargeService"-up-"Pay_Interface"
"BookChargeService"-up-"Book_Interface"
"ChargingService"-up-"ChargingInterface"
"SuggestionService"-up-"Sugg_Interface"
"CarBatteryService"-up-"CarBattery_Interface"
"PhoneDataService"-up-"PhoneData_Interface"

R -down- "CS_Interface"
R -down- "Pay_Interface"
R -down- "Book_Interface"
R -down- "ChargingInterface"
R -down- "Sugg_Interface"
R -down- "CarBattery_Interface"
R -down- "PhoneData_Interface"

"NearbyCharginggStationService" -- "ModelInterface"
"PayChargeService" -- "ModelInterface"
"BookChargeService" -- "ModelInterface"
"ChargingService" -- "ModelInterface"
"SuggestionService" -- "ModelInterface"
"CarBatteryService" -- "ModelInterface"
"PhoneDataService" -- "ModelInterface"

"NearbyCharginggStationService" -- "CPMS_APIHandler"
"NearbyCharginggStationService" -- "PhoneData_APIHandler"
"SuggestionService" -- "PhoneData_APIHandler"
"SuggestionService" -- "CPMS_APIHandler"
"SuggestionService" -- "CarBattery_APIHandler"
"PayChargeService" -- "PaymentAPIHandler"
"PhoneDataService" -- "PhoneData_APIHandler"
"CarBatteryService" -- "CarBattery_APIHandler"

@enduml

------------------------------------------------
DeploymentView eMSP

@startuml
left to right direction
node Smartphone {
 node eMSP
}

node DatabaseServer {
 node MySQL
}

node LoadBalancer
node CarBattery
node CPMS


eMSP -left- CarBattery
eMSP -up- CPMS
Smartphone -- LoadBalancer
LoadBalancer -- DatabaseServer


@enduml

-------------------------------------------------
DeploymentView CPMS

@startuml
left to right direction
node Computer{
 node Browser
}

node ApplicationServer{
 node CPMS
 node MySQL
}

node LoadBalancer
node ChargingStations
node DSO

DSO -[hidden]- ChargingStations
CPMS -- DSO
CPMS -- ChargingStations
Computer -- LoadBalancer
LoadBalancer -- ApplicationServer
CPMS -- MySQL

@enduml

--------------------------------------
Component Interfaces eMSP

@startuml
left to right direction
hide empty members
skinparam classAttributeIconSize 0
class Router

Router --> CS_Interface
Router --> Sugg_Interface 
Router --> Pay_Interface
Router --> CarBattery_Interface 
Router --> PhoneData_Interface
Router --> ChargingInterface
Router --> Book_Interface 
Router --> AuthenticationInterface

CS_Interface --> ModelInterface
Sugg_Interface--> ModelInterface 
Pay_Interface--> ModelInterface
CarBattery_Interface --> ModelInterface
PhoneData_Interface--> ModelInterface
ChargingInterface--> ModelInterface
Book_Interface --> ModelInterface
AuthenticationInterface--> ModelInterface

together {
class "PaymentAPIHandler"
class "CPMS_APIHandler"
class "CarBattery_APIHandler"
class "PhoneData_APIHandler"
}

CS_Interface  -- "CPMS_APIHandler"
CS_Interface  -- "PhoneData_APIHandler"
Sugg_Interface -- "PhoneData_APIHandler"
Sugg_Interface -- "CPMS_APIHandler"
Sugg_Interface -- "CarBattery_APIHandler"
Pay_Interface -- "PaymentAPIHandler"
PhoneData_Interface -- "PhoneData_APIHandler"
CarBattery_Interface  -- "CarBattery_APIHandler"



class CPMS_APIHandler{
 +getNearCSsView(location)
 +bookCharge(booking)
 +startCharging()
 +BatteryFull_ChargingStopped()
 +getFittingCS()
}

class CarBattery_APIHandler {
+getBatteryStatus()
}

class PhoneData_APIHandler {
+getCalendarData()
 +getLocationData()
}

class PaymentAPIHandler {
  +payingProcedure(data)
}

class CS_Interface {
  +getNearCSsView(location)
}
class Sugg_Interface {
  +checkIfSuggestionNecessary()
  +SuggestOffer()
}
class Pay_Interface{
 +payingProcedure(data)
}

class CarBattery_Interface {
 +getBatteryStatus()
}
class PhoneData_Interface {
 +getCalendarData()
 +getLocationData()
}
class ChargingInterface {
 +startCharging()
 +stoppedCharging()
}

class Book_Interface {
  +getBookView()
  +getCurrentBookingsView()
  +getSpecificBooking(id)
  +bookCharge(bookingForm)
  +checkForm()
}
class AuthenticationInterface {
  +getLoginView()
  +getRegisterView()
  +register(registerForm)
  +validate(registerForm)
  +login(user, password)
}
class ModelInterface{
  +checkCredentials(user, password)
  +checkAvailability(data)
  +insertData(user)
}
class DBMS_API{
  +checkAvailability(data)
  +create(data)
  +read(query)
  +delete(query)
  +update(query, entity)
}

ModelInterface --> DBMS_API
@enduml

----------------------------------------------
Component Interfaces CPMS

@startuml
left to right direction
hide empty members
skinparam classAttributeIconSize 0
class Router

Router --> CPInterface
Router --> AAInterface
Router --> AuthenticationInterface
Router --> StatusInterface
Router --> BatteriesInterface
Router --> ChargingInterface
Router --> BYInterface

CPInterface--> ModelInterface
AAInterface--> ModelInterface 
AuthenticationInterface--> ModelInterface
StatusInterface--> ModelInterface
BatteriesInterface--> ModelInterface
ChargingInterface--> ModelInterface


together {
class "PaymentAPIHandler"
class "eMSP_APIHandler"
class "DSOAPIHandler"
class "ChargingStationAPIHandler"
}

BYInterface-- "DSOAPIHandler"
BYInterface -- "PaymentAPIHandler"
StatusInterface -- "ChargingStationAPIHandler"
BatteriesInterface -- "ChargingStationAPIHandler"
ChargingInterface -- "ChargingStationAPIHandler"
ChargingInterface -- "eMSP_APIHandler"


class PaymentAPIHandler {
+payingProcedure(data)
}

class eMSP_APIHandler {
 +startCharging()
+BatteryFull(station)
}

class DSOAPIHandler {
+getDSOListView()
}

class ChargingStationAPIHandler {
+getCarID()
+startCharging()
+BatteryFull(station)
+getStatusInformation()
+useEnergyBattery(battery)
}


class CPInterface{
+getPricingView()
+selectSpecialOffer()
+setSpecialOffer(price)
+setPrice(price)
}
class AAInterface{
+activateAutomaticMode()
}
class AuthenticationInterface{
 +getRegisterView()
 +getLoginView()
 +register(registerForm)
 +validate(registerForm)
 +login(user, password)
}

class StatusInterface{
+getStatusView()
}
class BatteriesInterface{
+getBatteriesView()
+useEnergyBattery(battery)
+getBatteriesView()
+storeEnergy(battery)
}
class ChargingInterface {
+startCharging()
+validateCar(car)
+BatteryFull(station)
}

class BYInterface{
+getDSOListView()
+selectDSO(dso)
+buyFromDSO(form)
}

class ModelInterface{
 +checkAvailability(data)
 +insertData(user)
 +checkCredentials(user,password)
 +read(ID)
+update(query)
}
class DBMS_API{
  +checkAvailability(data)
  +create(data)
  +read(query)
  +delete(query)
  +update(query)
}

ModelInterface --> DBMS_API
@enduml
